<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>商城</title>
<link rel="stylesheet" type="text/css" href="css/shop.css">
</head>
<body>
	<header>
		<div class="head">
			<ul class="nav">
				<li id="lione"><a href="">NEX系列</a></li>
				<li><a href="">X系列</a></li>
				<li><a href="">Z系列</a></li>
				<li><a href="">Y系列</a></li>
				<li><a href="">商城</a></li>
				<li><a href="">品牌</a></li>
				<li><a href="">体验店</a></li>
				<li><a href="">Funtouch OS</a></li>
				<li><a href="">服务</a></li>
				<li><a href="">社区</a></li>
			</ul>
		</div>
		<div class="content">
			<div id="box">
				<img src="img/shop1.jpg" />
				<img src="img/shop2.jpg" />
				<img src="img/shop3.jpg" />
				<img src="img/shop4.jpg" />
				<div id="ddBox">
					<ul id="doudouBox">
						<li></li>
						<li></li>
						<li></li>
						<li></li>
					</ul>
				</div>
			</div>
			<div class="wrapper">
				<ul class="category">
					<li  id="uli" ><a href="">手机</a></li>
					<li><a href="">充电</a></li>
					<li><a href="">音乐</a></li>
					<li><a href="">配件</a></li>
					<li><a href="">智能</a></li>
					<li><a href="">摄影</a></li>
					<li><a href="">生活</a></li>
				</ul>				
			</div>
			<div class="libiao">
				<div class="d11">
					<span>手机</span>
					<a href="">全部手机</a>
				</div>
				<ul class="d12">
					<li><a href="" class="a1">NEX系列</a></li>
					<li><a href="" class="a2">X系列</a></li>
					<li><a href="" class="a3">Z系列</a></li>
				</ul>
			</div>
			<div class="libiao" id="libiao2">
					
			</div>
		</div>
	</header>
	<footer>
		<div class="foot1">
			<a href=""><img src="img/shop21.jpg" alt=""></a>
			<a href="#"><img src="img/shop22.jpg" alt=""></a>
			<a href="#"><img src="img/shop22.jpg" alt=""></a>
			<a href="#"><img src="img/shop22.jpg" alt=""></a>
		</div>
		<div class="info1">热卖专区<div class="more-wrapper"><a href="">更多</a></div></div>
		<div class="box-list">
			<!-- <div class="list1">
				<a href="">
					<img src="img/shop31.png" alt="">
				</a>
				<p class="name">Z3 全面屏 6GB+64GB-3色可选</p>
				<p class="feature">领券立减100元|骁龙710AIE处理器</p>
				<p class="price">￥2198.00</p>
			</div>
			<div class="list1">
				<a href="">
					<img src="img/shop31.png" alt="">
				</a>
				<p class="name">Z3 全面屏 6GB+64GB-3色可选</p>
				<p class="feature">领券立减100元|骁龙710AIE处理器</p>
				<p class="price">￥2198.00</p>
			</div> -->

		</div>
		<div class="info2">精品手机<div class="more-wrapper"><a href="">更多</a></div></div>
		<div class="box-list2">
			<div class="zhanshitu"><a href=""><img src="img/shop41.jpg" alt=""></a></div>
			<!-- <div class="list2">
				<a href="">
					<img src="img/shop42.png" alt="">
				</a>
				<p class="name">Z3 全面屏 6GB+64GB-3色可选</p>
				<p class="feature">领券立减100元|骁龙710AIE处理器</p>
				<p class="price">￥2198.00</p>
			</div> -->
		</div>
		<div class="info3">精品配件<div class="more-wrapper"><a href="">更多</a></div></div>
		<div class="box-list3">
			<!-- <div class="list3">
				<a href="">
					<img src="img/shop51.png" alt="">
				</a>
				<p class="name">Z3 全面屏 6GB+64GB-3色可选</p>
				<p class="feature">领券立减100元|骁龙710AIE处理器</p>
				<p class="price">￥2198.00</p>
			</div> -->
		</div>
	</footer>
	<div class="banner">
		<div class="lianjie">
			<h6 class="titone">热门链接</h6>
			<div class="content">
				<ul>
					<li>X23</li>
					<li>X系列</li>
					<li>Xplay摄影</li>
					<li>vivo摄影</li>
					<li>查找手机</li>
					<li>常见问题</li>
				</ul>
			</div>
		</div>
		<div class="zaixian">
			<h6 class="titone">在线购买</h6>
			<div class="content">
				<ul>
					<li>X官方商城</li>
					<li>选购手机</li>
					<li>选购配件</li>
					<li>vivo摄影</li>
					<li>查找手机</li>
					<li>常见问题</li>
				</ul>
			</div>
		</div>
		<div class="fuwu">
			<h6 class="titone">服务支持</h6>
			<div class="content">
				<ul>
					<li>服务首页</li>
					<li>选购手机</li>
					<li>选购配件</li>
					<li>vivo摄影</li>
					<li>查找手机</li>
					<li>常见问题</li>
				</ul>
			</div>
		</div>
		<div class="shequ">
			<h6 class="titone">vivo社区</h6>
			<div class="content">
				<ul>
					<li>社区首页</li>
					<li>摄影专区</li>
					<li>选购配件</li>
					<li>vivo摄影</li>
					<li>查找手机</li>
					<li>常见问题</li>
				</ul>
			</div>
		</div>
		<div class="guanyu">
			<h6 class="titone">关于vivo</h6>
			<div class="content">
				<ul>
					<li>vivo简介</li>
					<li>摄影专区</li>
					<li>选购配件</li>
					<li>vivo摄影</li>
					<li>查找手机</li>
					<li>常见问题</li>
				</ul>
			</div>
		</div>
		<div class="kefu">
			<div class="yuyin">

				<img src="img/tb3.png" alt="">
				<a href="">在线客服</a>
			</div>
			<p class="pps">400-678-9688</p>
			<p class="ppps">24小时全国服务热线</p>
		</div>
	</div>
	<div class="footer">
		<div class="footleft">
			<span>Copyright ©2011-2018 广东步步高电子工业有限公司 版权所有 保留一切权利 | </span>
			<a href="">隐私政策</a> |
			<a href="">法律声明</a> |
			<a href="">粤B2-20080267 | 粤ICP备05100288号</a>
		</div>
		<div class="footright">
			<a href="">关注vivo</a> |
			<a href="">中国</a>
		</div>
	</div>
</body>
</html>
<script type="text/javascript" src="js/jquery-1.11.3.js"></script>
<script type="text/javascript" src="js/cookieTools.js"></script>

<script type="text/javascript">
	
function $$(str){//#box .cls  p
	if(str.charAt(0)=="#"){
		return document.getElementById(str.substring(1));
	}else if(str.charAt(0)=="."){
		return document.getElementsByClassName(str.substring(1));
	}else{
		return document.getElementsByTagName(str);
	}
}


function getStyle(obj,attr){
	if(obj.currentStyle){
		return obj.currentStyle[attr];
	}else{
		return window.getComputedStyle(obj)[attr];
	}	
}

let myTimer;//定义定时器
let index = 0;//记录当前图片的序号，从0开始
	
//1、自动变换图片，同时变豆豆
function autoPlay() {
	myTimer = setInterval(function(){
		//1、改变数据
		index++;
		//2、判断边界
		if(index>3){
			index=0;
		}
		//3、改变外观
		showImg(index);
	},1000);
}

function stopPlay() {
	window.clearInterval(myTimer);
}

function goImg(transIndex) {
	//1、改变数据（改变当前图片的序号）
	index = transIndex;
	//3、改变外观
	showImg(index);
}

function showImg(transIndex) {
	//3.1 改变图片的z-index
	let imgs = $$("img");
	for(let i=0;i<imgs.length;i++){
		imgs[i].style.zIndex = 0;
	}
	imgs[transIndex].style.zIndex = 1;

	//3.2 改变豆豆的颜色
	let lis = $$("#doudouBox").children;
	for(let i=0;i<lis.length;i++){
		lis[i].style.backgroundColor = "#e6dde4";
	}
	lis[transIndex].style.backgroundColor = "#333";
}


window.onload = function(){
// 动态添加图片
	$(function(){
		$.ajax({ 
			url: "getGoodsList.php", 
			type:"get",
			dataType:"json",
			async:true,
			date:{},
			success: function(data){
			    console.log("------success------")
			    console.log(data)
			    for(let i=0;i<data.length;i++){
			    	let str ="\
			    	<div class='list1' id = '"+data[i].goodsId+"'>\
			    		<a>\
							<img src='"+data[i].goodsImg+"'>\
						</a>\
							<p class='name'>"+data[i].goodsName+"</p>\
							<p class='feature'>"+data[i].goodsDesc+"</p>\
							<p class='price'>￥"+data[i].goodsPrice+"</p>\
						</div>"
					$(".box-list").append(str);

					$(".list1").click(function(){
						let goodsId= $(this).attr("id");
						saveCookie("Id",goodsId,7);
						location.href="shopinfo.html";
					})
			    } 
			},
			error: function(data){
			    console.log("------error------")
			    console.log(data)
			}
		});

	})	

// 动态添加图片
	$(function(){
		$.ajax({ 
			url: "getGoodsList2.php", 
			type:"get",
			dataType:"json",
			async:true,
			date:{},
			success: function(data){
			    console.log("------success------")
			    console.log(data)
			    for(let i=0;i<data.length;i++){
			    	let str ="\
			    	<div class='list2' id = '"+data[i].goodsId+"'>\
			    		<a>\
							<img src='"+data[i].goodsImg+"'>\
						</a>\
							<p class='name'>"+data[i].goodsName+"</p>\
							<p class='feature'>"+data[i].goodsDesc+"</p>\
							<p class='price'>￥"+data[i].goodsPrice+"</p>\
						</div>"
					$(".box-list2").append(str);

					$(".list2").click(function(){
						let goodsId= $(this).attr("id");
						saveCookie("Id",goodsId,7);
						location.href="shopinfo.html";
					})
			    } 
			},
			error: function(data){
			    console.log("------error------")
			    console.log(data)
			}
		});

	})	



// 动态添加图片
	$(function(){
		$.ajax({ 
			url: "getGoodsList3.php", 
			type:"get",
			dataType:"json",
			async:true,
			date:{},
			success: function(data){
			    console.log("------success------")
			    console.log(data)
			    for(let i=0;i<data.length;i++){
			    	let str ="\
			    	<div class='list3'>\
			    		<a href=''>\
							<img src='"+data[i].goodsImg+"'>\
						</a>\
							<p class='name'>"+data[i].goodsName+"</p>\
							<p class='feature'>"+data[i].goodsDesc+"</p>\
							<p class='price'>￥"+data[i].goodsPrice+"</p>\
						</div>"
					$(".box-list3").append(str);
			    } 
			},
			error: function(data){
			    console.log("------error------")
			    console.log(data)
			}
		});

	})	

















	//1、自动变换图片，同时变豆豆
	autoPlay();
	//2、鼠标放上停止自动变换
	$$("#box").onmouseover = function () {
		stopPlay();
	}
	//3、鼠标离开，继续自动变换
	$$("#box").onmouseout = function () {
		autoPlay();
	}

	//4、点击豆豆跳到指定的图片
	let lis = $$("#doudouBox").children;
	for(let i=0;i<lis.length;i++){
		//lis[i].setAttribute("index",i);
		lis[i].onclick = function () {
			//跳到指定序号的图片
			//goImg(parseInt(this.getAttribute("index")));
			goImg(i);
		}
	}


	// $("#uli").onmouseover= function(){		
	// 	$(".libiao")[0].style.display="block";
	// 	// $("#uli").style.backgroundColor="white";
	// }

	// $("#uli").onmouseleave= function(){
	// 	$(".libiao")[0].style.display="none";
	// 	// $("#uli").style.backgroundColor="#f4f2ff";
	// }

	var uls = $$('.category')[0].children;
	for(let i = 0; i < uls.length; i++) {
		uls[i].onmouseenter = function(){
			this.style.backgroundColor="white";
			$$(".libiao")[i].style.display="block";
		}
		uls[i].onmouseleave = function(){
			this.style.backgroundColor="#f4f2ff";
			$$(".libiao")[i].style.display="none";
		}
	}	






}

</script>